# Renesas EK-RA4M3 build

This directory contains the source code, scripts, metadata and generated code to build a project using the EK-RA4M3 evaluation kit. 

## Files

There are several subdirectories in this directory, and the structure is somewhat different compared to if a project is generated by e.g. RA Smart Configurator (RASC). The main purpose of this is to increase code re-use if making projects accross platform, as when a project is generated by RASC, it tends to copy a lot of source code from different repos and put them all in the same directory. 

That being said, there is also some generated code. In a project generated by RASC, the generated code is placed under the `ra_gen` directory, and in this case, those files are copied into the `inc` directory, exluding the main file, which Renesas has a bad habit of generating as a boilerplate file. 

Moreover, the linker script is also generated by RASC, and in the interest of not having to write a linker script from scratch, that has also been copied from a RASC project into the `script` directory. 

## Changing BSP
The BSP contains the files necessary for IO-mapping, which is a nifty feature that can be used in conjuction with RASC. 
RASC takes the `configuration.xml` file as an input, and generated the very source code that we don't want generated, including the CMake files and copies of the source code. 

If you want to change the BSP and generate the files, there is a script which takes the `configuration.xml` file, generates the files in a temporary subdirectory, copies them over to the initial directory and removes the temporary directory. If you want to keep the files, start RA Smart Configurator manually and open the `configuration.xml` file from there. 

To edit the BSP, open the `configuration.xml` in RASC, make the edits you need, save the file. IMPORTANT: DO NOT GENERATE THE FILES FROM RASC! 
Then close and run the generator script: 

To run the script, `cd` into the `firmware/ek-ra4m3` directory and run `./build_fsp.sh`, and you should have generated all the files you need. 

Or, you could just edit the BSP source code files in `inc`, whatever you prefer. 

To generate an entirely new configuration file, just start RASC and run the config file from there. 